---
import BaseLayout from '../layouts/BaseLayout.astro';
import ResponsiveImage from '../components/ResponsiveImage.astro';

// SEO for 404 page
const title = "Page Not Found - How to Fund Travel";
const description = "The page you're looking for doesn't exist. Let's get you back on track to funding your travel dreams.";
const image = "/images/optimized/how-to-fund-travel-balloons-hero.webp";

// Track 404 errors for analytics
if (typeof window !== 'undefined') {
  // Client-side analytics tracking
  window.addEventListener('load', () => {
    if (typeof gtag !== 'undefined') {
      gtag('event', 'page_view', {
        page_title: '404 Error Page',
        page_location: window.location.href,
        custom_map: {
          'error_type': '404_not_found'
        }
      });
    }
  });
}
---

<BaseLayout title={title} description={description} image={image}>
  <!-- 404 Hero Section -->
  <section class="error-hero" aria-labelledby="error-heading">
    <div class="container">
      <div class="error-content">
        <div class="error-badge">
          <span class="badge-icon">üß≠</span>
          Oops! Page Not Found
        </div>
        
        <h1 id="error-heading">
          Looks like this page has gone on an adventure without us!
        </h1>
        
        <p class="error-subtitle">
          Don't worry - even the best travelers sometimes take a wrong turn. Let's get you back on the right path to funding your travel dreams.
        </p>
        
        <div class="error-actions">
          <a href="/" class="btn btn-primary">
            <span class="btn-icon">üè†</span>
            Back to Home
          </a>
          <a href="/blog" class="btn btn-secondary">
            <span class="btn-icon">üìö</span>
            Explore Blog
          </a>
        </div>
      </div>
      
      <div class="error-image">
        <ResponsiveImage
          src="/images/optimized/how-to-fund-travel-balloons-hero.webp"
          alt="Travel balloons floating in the sky - representing the journey to fund travel"
          width="500"
          height="400"
          priority={true}
          sizes="(max-width: 768px) 100vw, 500px"
        />
      </div>
    </div>
  </section>

  <!-- Helpful Navigation Section -->
  <section class="helpful-nav" aria-labelledby="helpful-heading">
    <div class="container">
      <div class="section-intro">
        <h2 id="helpful-heading">Popular Destinations</h2>
        <p>Here are some popular pages to help you get back on track:</p>
        <div class="divider"></div>
      </div>
      
      <div class="nav-grid">
        <article class="nav-card">
          <div class="nav-icon">üí∞</div>
          <h3>Start Your Journey</h3>
          <p>Begin your path to funding travel with our comprehensive guides and resources.</p>
          <a href="/" class="card-link">Explore Resources <span aria-hidden="true">‚Üí</span></a>
        </article>
        
        <article class="nav-card">
          <div class="nav-icon">üìñ</div>
          <h3>Success Stories</h3>
          <p>Read inspiring case studies from families who've successfully funded their travel dreams.</p>
          <a href="/case-studies/" class="card-link">Read Stories <span aria-hidden="true">‚Üí</span></a>
        </article>
        
        <article class="nav-card">
          <div class="nav-icon">üìù</div>
          <h3>Latest Blog Posts</h3>
          <p>Discover practical tips and strategies for funding your travel lifestyle.</p>
          <a href="/blog" class="card-link">Read Blog <span aria-hidden="true">‚Üí</span></a>
        </article>
        
        <article class="nav-card">
          <div class="nav-icon">üìû</div>
          <h3>Get Help</h3>
          <p>Need personalized guidance? Book a call to discuss your specific travel funding goals.</p>
          <a href="/book-a-call" class="card-link">Book a Call <span aria-hidden="true">‚Üí</span></a>
        </article>
      </div>
    </div>
  </section>

  <!-- Search Section -->
  <section class="search-section" aria-labelledby="search-heading">
    <div class="container">
      <div class="search-content">
        <h2 id="search-heading">Can't find what you're looking for?</h2>
        <p>Try searching our site for specific topics or resources:</p>
        
        <form class="search-form" action="/blog" method="GET" role="search">
          <div class="search-input-group">
            <input 
              type="search" 
              name="q" 
              placeholder="Search for topics like 'remote work', 'online business', 'travel investing'..."
              class="search-input"
              aria-label="Search the website"
            >
            <button type="submit" class="search-button" aria-label="Search">
              <span class="search-icon">üîç</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* 404 Hero Section */
  .error-hero {
    align-items: center;
    background: linear-gradient(135deg, var(--primary-light) 0%, var(--light) 100%);
    display: flex;
    min-height: 60vh;
    padding: 4rem 0;
    position: relative;
  }
  
  .error-hero .container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: center;
  }
  
  .error-content {
    text-align: left;
  }
  
  .error-badge {
    align-items: center;
    background: var(--primary-color);
    border-radius: 25px;
    color: var(--white);
    display: inline-flex;
    font-size: 0.9rem;
    font-weight: 600;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    padding: 0.5rem 1rem;
  }
  
  .badge-icon {
    font-size: 1.1rem;
  }
  
  .error-hero h1 {
    color: var(--dark);
    font-size: 2.5rem;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 1.5rem;
  }
  
  .error-subtitle {
    color: var(--medium);
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 2rem;
  }
  
  .error-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }
  
  .btn {
    align-items: center;
    border-radius: var(--radius-md);
    display: inline-flex;
    font-weight: 600;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    text-decoration: none;
    transition: all var(--transition-normal);
  }
  
  .btn-primary {
    background: var(--primary-color);
    color: var(--white);
  }
  
  .btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
  }
  
  .btn-secondary {
    background: var(--white);
    border: 2px solid var(--primary-color);
    color: var(--primary-color);
  }
  
  .btn-secondary:hover {
    background: var(--primary-color);
    color: var(--white);
    transform: translateY(-2px);
  }
  
  .btn-icon {
    font-size: 1.1rem;
  }
  
  .error-image {
    text-align: center;
  }
  
  /* Helpful Navigation Section */
  .helpful-nav {
    background: var(--white);
    padding: 4rem 0;
  }
  
  .section-intro {
    text-align: center;
    margin-bottom: 3rem;
  }
  
  .section-intro h2 {
    color: var(--dark);
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 1rem;
  }
  
  .section-intro p {
    color: var(--medium);
    font-size: 1.1rem;
    margin-bottom: 1.5rem;
  }
  
  .divider {
    background: var(--primary-color);
    height: 3px;
    margin: 0 auto;
    width: 60px;
  }
  
  .nav-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }
  
  .nav-card {
    background: var(--light);
    border-radius: var(--radius-lg);
    padding: 2rem;
    text-align: center;
    transition: all var(--transition-normal);
  }
  
  .nav-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }
  
  .nav-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }
  
  .nav-card h3 {
    color: var(--dark);
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }
  
  .nav-card p {
    color: var(--medium);
    line-height: 1.6;
    margin-bottom: 1.5rem;
  }
  
  .card-link {
    color: var(--primary-color);
    font-weight: 600;
    text-decoration: none;
    transition: color var(--transition-fast);
  }
  
  .card-link:hover {
    color: var(--primary-dark);
  }
  
  /* Search Section */
  .search-section {
    background: var(--light);
    padding: 4rem 0;
  }
  
  .search-content {
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }
  
  .search-content h2 {
    color: var(--dark);
    font-size: 1.75rem;
    font-weight: 700;
    margin-bottom: 1rem;
  }
  
  .search-content p {
    color: var(--medium);
    margin-bottom: 2rem;
  }
  
  .search-form {
    max-width: 500px;
    margin: 0 auto;
  }
  
  .search-input-group {
    display: flex;
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: var(--shadow-md);
  }
  
  .search-input {
    border: none;
    flex: 1;
    font-size: 1rem;
    padding: 1rem 1.5rem;
    outline: none;
  }
  
  .search-input::placeholder {
    color: var(--medium);
  }
  
  .search-button {
    background: var(--primary-color);
    border: none;
    color: var(--white);
    cursor: pointer;
    padding: 1rem 1.5rem;
    transition: background var(--transition-fast);
  }
  
  .search-button:hover {
    background: var(--primary-dark);
  }
  
  .search-icon {
    font-size: 1.1rem;
  }
  
  /* Container */
  .container {
    max-width: var(--container-xl);
    margin: 0 auto;
    padding: 0 var(--space-lg);
  }
  
  /* Responsive Design */
  @media (max-width: 768px) {
    .error-hero .container {
      grid-template-columns: 1fr;
      gap: 2rem;
      text-align: center;
    }
    
    .error-hero h1 {
      font-size: 2rem;
    }
    
    .error-actions {
      justify-content: center;
    }
    
    .nav-grid {
      grid-template-columns: 1fr;
    }
    
    .search-input-group {
      flex-direction: column;
    }
    
    .search-button {
      border-radius: 0 0 var(--radius-md) var(--radius-md);
    }
  }
  
  @media (max-width: 480px) {
    .error-hero {
      padding: 2rem 0;
    }
    
    .error-hero h1 {
      font-size: 1.75rem;
    }
    
    .error-actions {
      flex-direction: column;
    }
    
    .btn {
      justify-content: center;
    }
  }
</style>

<script>
  // Enhanced 404 page functionality
  document.addEventListener('DOMContentLoaded', function() {
    // Track 404 page view
    if (typeof gtag !== 'undefined') {
      gtag('event', 'page_view', {
        page_title: '404 Error Page',
        page_location: window.location.href,
        custom_map: {
          'error_type': '404_not_found',
          'referrer': document.referrer || 'direct'
        }
      });
    }
    
    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
    
    // Enhance search form with suggestions
    const searchInput = document.querySelector('.search-input');
    if (searchInput) {
      const suggestions = [
        'remote work opportunities',
        'online business ideas',
        'travel investing strategies',
        'digital nomad lifestyle',
        'family travel tips',
        'passive income streams'
      ];
      
      let currentSuggestion = 0;
      
      // Cycle through suggestions as placeholder
      setInterval(() => {
        searchInput.placeholder = `Search for topics like '${suggestions[currentSuggestion]}'...`;
        currentSuggestion = (currentSuggestion + 1) % suggestions.length;
      }, 3000);
    }
  });
</script>
